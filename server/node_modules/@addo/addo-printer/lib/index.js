"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ref_1 = require("ref");
const autoreplyprint_1 = require("./autoreplyprint");
const printer_alignment_1 = require("./core/printer-alignment");
const printer_status_1 = require("./core/printer-status");
const rxjs_1 = require("rxjs");
const DEFAULT_AUTOREPLY_MODE = 0;
class Printer {
    constructor(dev, mode = DEFAULT_AUTOREPLY_MODE) {
        const buf = ref_1.allocCString('Printer opened');
        this.handle = autoreplyprint_1.autoreplyprint.CP_Port_OpenUsb(dev, mode);
        console.log("Handle: ", this.handle);
    }
    printText(text) {
        return autoreplyprint_1.autoreplyprint.CP_Pos_PrintText(this.handle, text);
    }
    feedLine(numLines) {
        return autoreplyprint_1.autoreplyprint.CP_Pos_FeedLine(this.handle, numLines);
    }
    getPrinterStatus(timeout) {
        return autoreplyprint_1.autoreplyprint.CP_Pos_QueryRTStatus(this.handle, timeout);
    }
    cutPaper(fullCut = false) {
        if (fullCut)
            return autoreplyprint_1.autoreplyprint.CP_Pos_FullCutPaper(this.handle);
        else
            return autoreplyprint_1.autoreplyprint.CP_Pos_HalfCutPaper(this.handle);
    }
    feedAndHalfCutPaper() {
        return autoreplyprint_1.autoreplyprint.CP_Pos_FeedAndHalfCutPaper(this.handle);
    }
    close() {
        return autoreplyprint_1.autoreplyprint.CP_Port_Close(this.handle);
    }
    reset() {
        return autoreplyprint_1.autoreplyprint.CP_Pos_ResetPrinter(this.handle);
    }
    clear() {
        return autoreplyprint_1.autoreplyprint.CP_Printer_ClearPrinterBuffer(this.handle)
            && autoreplyprint_1.autoreplyprint.CP_Printer_ClearPrinterError(this.handle)
            && autoreplyprint_1.autoreplyprint.CP_Pos_ResetPrinter(this.handle);
    }
    version() {
        return autoreplyprint_1.autoreplyprint.CP_Library_Version();
    }
    printTestPage() {
        return autoreplyprint_1.autoreplyprint.CP_Pos_PrintSelfTestPage(this.handle);
    }
    /**
     * Set print alignment
     *
     * @param nAlignment print alignment, value are defined as follow:
     *      - 0 -> align left
     *      - 1 ->  align center
     *      - 2 ->  align right
     */
    setPrintAlignment(nAlignment) {
        return autoreplyprint_1.autoreplyprint.CP_Pos_SetAlignment(this.handle, nAlignment);
    }
    printTicket(ticket, clear = false) {
        return new Promise((resolve, reject) => {
            let status = [];
            status.push(autoreplyprint_1.autoreplyprint.CP_Pos_SetMultiByteEncoding(this.handle, 1));
            status.push(this.setPrintAlignment(printer_alignment_1.PrinterAlignment.center));
            status.push(this.printText(ticket.date));
            status.push(this.feedLine(1));
            status.push(autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 1, 1));
            status.push(this.printText(ticket.location));
            status.push(autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 0, 0));
            status.push(this.feedLine(1));
            status.push(autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 1, 1));
            status.push(this.printText(`${ticket.product_name} ${ticket.price}${ticket.currency}`));
            status.push(this.feedLine(2));
            status.push(autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 0, 0));
            status.push(autoreplyprint_1.autoreplyprint.CP_Pos_SetTextRotate(this.handle, ticket.rotateWatermark ? 1 : 0));
            status.push(this.printText(ticket.watermark));
            status.push(this.feedLine(1));
            status.push(autoreplyprint_1.autoreplyprint.CP_Pos_SetTextRotate(this.handle, 0));
            status.push(this.printText(ticket.printed));
            status.push(this.feedLine(2));
            status.push(this.cutPaper());
            if (clear) {
                status.push(autoreplyprint_1.autoreplyprint.CP_Printer_ClearPrinterBuffer(this.handle));
                status.push(this.clear());
            }
            else {
                status.push('-');
                status.push('-');
            }
            let result = { status: status.join(''), code: "_NO_PRINTER_CHECK", };
            // if (lib.CP_Pos_QueryPrintResult(this.handle, 1, 30000)) {
            //     result = this.getPrinterInfo()
            //     console.log(result);
            // }
            resolve(result);
        });
    }
    printTestTicket() {
        console.log(autoreplyprint_1.autoreplyprint.CP_Printer_ClearPrinterBuffer(this.handle), this.clear(), autoreplyprint_1.autoreplyprint.CP_Pos_SetMultiByteEncoding(this.handle, 1), this.setPrintAlignment(printer_alignment_1.PrinterAlignment.center), this.printText("Sab 14 Ago"), this.feedLine(1), autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 1, 1), this.printText("Cocoricò"), autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 0, 0), this.feedLine(1), 
        //lib.CP_Pos_SetTextBold(this.handle, 1),
        autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 1, 1), 
        // this.printText("DRINK"),
        // this.feedLine(1),
        // this.printText("5.00 €"),
        this.printText("ANALCOLICO 15€"), this.feedLine(2), autoreplyprint_1.autoreplyprint.CP_Pos_SetTextScale(this.handle, 0, 0), autoreplyprint_1.autoreplyprint.CP_Pos_SetTextRotate(this.handle, 1), this.printText("¤-¤-¤-¤-¤-¤-¤-¤"), this.feedLine(1), autoreplyprint_1.autoreplyprint.CP_Pos_SetTextRotate(this.handle, 0), this.printText("Validato il 21/10/2020"), this.feedLine(2), this.cutPaper(), this.clear(), this.close());
    }
    getPrinterInfo() {
        let result = { status: 'ok' };
        let printer_error_status = 0;
        let printer_info_status = 0;
        let printer_received_byte_count = 0;
        let printer_printed_page_id = 0;
        let timestamp_ms_printer_status = 0;
        let timestamp_ms_printer_received = 0;
        let timestamp_ms_printer_printed = 0;
        if (autoreplyprint_1.autoreplyprint.CP_Printer_GetPrinterStatusInfo(this.handle, printer_error_status, printer_info_status, timestamp_ms_printer_status) &&
            autoreplyprint_1.autoreplyprint.CP_Printer_GetPrinterReceivedInfo(this.handle, printer_received_byte_count, timestamp_ms_printer_received) &&
            autoreplyprint_1.autoreplyprint.CP_Printer_GetPrinterPrintedInfo(this.handle, printer_printed_page_id, timestamp_ms_printer_printed)) {
            //char msg[1000] = { 0, };
            // printer_error_status
            if (printer_error_status) {
                result.status = 'ko';
                result.printer_errors = printer_status_1.PrinterStatus.getStatus(printer_error_status);
            }
            // printer_info_status
            // {
            //     if (CP_PRINTERSTATUS_INFO_LABELMODE(printer_info_status))
            //         sprintf(& msg[strlen(msg)], "%s", "[Label Mode]");
            //     if (CP_PRINTERSTATUS_INFO_LABELPAPER(printer_info_status))
            //         sprintf(& msg[strlen(msg)], "%s", "[Label Paper]");
            //     if (CP_PRINTERSTATUS_INFO_PAPERNOFETCH(printer_info_status))
            //         sprintf(& msg[strlen(msg)], "%s", "[Paper Not Fetch]");
            //     sprintf(& msg[strlen(msg)], "%s", "\r\n");
            // }
            return result;
        }
    }
    onStatusChange() {
        return new rxjs_1.Observable((observer) => {
            let status = this.getPrinterStatus(15000);
            let last_status = 0;
            let interval = setInterval(() => {
                status = this.getPrinterStatus(15000);
                if (last_status != status) {
                    last_status = status;
                    observer.next(printer_status_1.PrinterStatus.getStatus(status));
                }
            }, 100);
            return {
                unsubscribe() {
                    clearInterval(interval);
                }
            };
        });
    }
}
exports.default = Printer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBbUM7QUFDbkMscURBQXlEO0FBRXpELGdFQUE0RDtBQUM1RCwwREFBc0Q7QUFFdEQsK0JBQWtDO0FBRWxDLE1BQU0sc0JBQXNCLEdBQUcsQ0FBQyxDQUFDO0FBRWpDLE1BQXFCLE9BQU87SUFHeEIsWUFBWSxHQUFXLEVBQUUsT0FBc0Isc0JBQXNCO1FBQ2pFLE1BQU0sR0FBRyxHQUFHLGtCQUFZLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsTUFBTSxHQUFHLCtCQUFHLENBQUMsZUFBZSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM3QyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVNLFNBQVMsQ0FBQyxJQUFZO1FBQ3pCLE9BQU8sK0JBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFTSxRQUFRLENBQUMsUUFBZ0I7UUFDNUIsT0FBTywrQkFBRyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFTSxnQkFBZ0IsQ0FBQyxPQUFlO1FBQ25DLE9BQU8sK0JBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFTSxRQUFRLENBQUMsVUFBbUIsS0FBSztRQUNwQyxJQUFJLE9BQU87WUFDUCxPQUFPLCtCQUFHLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztZQUU1QyxPQUFPLCtCQUFHLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxD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
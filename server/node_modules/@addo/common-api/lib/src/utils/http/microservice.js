"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Microservice = void 0;
class Microservice {
    constructor(handle) {
        handle.bind(this);
        this.handle = handle;
    }
    parseRequest(request) {
        throw new Error("Method not implemented.");
    }
    handle(http) {
        throw new Error("Must override this method!");
    }
    getHandler() {
        let self = this;
        return this.getAHandler.bind(self);
    }
    async getAHandler(...args) {
        this.http = this.parseRequest(args[0]);
        let response = await this.handle(this.http);
        return response;
    }
    generateResponse(body, statusCode = 200, headers = null) {
        let default_headers = {
            "Access-Control-Allow-Origin": "*",
            "access-control-allow-headers": "Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-User-Location",
        };
        return {
            statusCode: statusCode || 200,
            headers: headers
                ? Object.assign(default_headers, headers)
                : default_headers,
            body,
        };
    }
}
exports.Microservice = Microservice;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWljcm9zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL2h0dHAvbWljcm9zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUdBLE1BQWEsWUFBWTtJQUd2QixZQUFZLE1BQXNEO1FBQ2hFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVTLFlBQVksQ0FBQyxPQUFZO1FBQ2pDLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRVMsTUFBTSxDQUFDLElBQW9CO1FBQ25DLE1BQU0sSUFBSSxLQUFLLENBQUMsNEJBQTRCLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRU0sVUFBVTtRQUNmLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBVztRQUNyQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsSUFBSSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QyxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRU8sZ0JBQWdCLENBQ3RCLElBQVMsRUFDVCxhQUFxQixHQUFHLEVBQ3hCLFVBQWUsSUFBSTtRQUVuQixJQUFJLGVBQWUsR0FBRztZQUNwQiw2QkFBNkIsRUFBRSxHQUFHO1lBQ2xDLDhCQUE4QixFQUM1Qix1R0FBdUc7U0FDMUcsQ0FBQztRQUNGLE9BQU87WUFDTCxVQUFVLEVBQUUsVUFBVSxJQUFJLEdBQUc7WUFDN0IsT0FBTyxFQUFFLE9BQU87Z0JBQ2QsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQztnQkFDekMsQ0FBQyxDQUFDLGVBQWU7WUFDbkIsSUFBSTtTQUNMLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUE3Q0Qsb0NBNkNDIn0=